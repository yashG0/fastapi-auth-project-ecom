{% extends 'layout.html' %} {% block title %} AuthApp: Add Product {% endblock
title %} {% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Add New Product</h4>
                </div>
                <div class="card-body">
                    <form id="addProductForm">
                        <div class="mb-3">
                            <label for="productName" class="form-label"
                                >Product Name</label
                            >
                            <input
                                type="text"
                                class="form-control"
                                id="productName"
                                name="name"
                                placeholder="Enter product name"
                                required
                            />
                        </div>

                        <div class="mb-3">
                            <label for="productDescription" class="form-label"
                                >Description</label
                            >
                            <textarea
                                class="form-control"
                                id="productDescription"
                                name="description"
                                rows="4"
                                placeholder="Enter product description"
                                maxlength="500"
                            ></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="productPrice" class="form-label"
                                >Price ($)</label
                            >
                            <input
                                type="number"
                                class="form-control"
                                id="productPrice"
                                name="price"
                                placeholder="Enter price"
                                step="0.01"
                                required
                            />
                        </div>

                        <div class="mb-3">
                            <label for="productStock" class="form-label"
                                >Stock Quantity</label
                            >
                            <input
                                type="number"
                                class="form-control"
                                id="productStock"
                                name="stock"
                                placeholder="Enter stock quantity"
                                value="0"
                                min="0"
                            />
                        </div>

                        <div class="mb-3">
                            <label for="productCategory" class="form-label"
                                >Category</label
                            >
                            <select
                                class="form-select"
                                id="productCategory"
                                name="category"
                                required
                            >
                                <option value="" selected disabled>
                                    Choose a category
                                </option>
                                <option value="Electronics">Electronics</option>
                                <option value="Books">Books</option>
                                <option value="Clothing">Clothing</option>
                                <option value="Home">Home</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <!-- Hidden field for userId -->
                        <input
                            type="hidden"
                            id="userId"
                            name="userId"
                            value="{{ current_user_id }}"
                        />

                        <div class="d-grid">
                            <button
                                type="submit"
                                class="btn btn-primary"
                                id="submitBtn"
                            >
                                Add Product
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById("addProductForm").addEventListener("submit", function (event) {
        event.preventDefault();
        const form = event.target;
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        const payload = {
            name: data.name,
            description: data.description,
            price: parseFloat(data.price),
            stock: parseInt(data.stock),
            category: data.category,
            userId: data.userId
        };

        // Add product submission logic here
        console.log("Product payload:", payload);
    });
</script>
{% endblock content %}
